<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"  layout:decorate="~{layout}">
<body>

<div layout:fragment="content">
    <!-- 회원가입 폼 -->
    <div class="container mt-5">
        <div class="row justify-content-center">
            <div class="col-lg-6 col-md-8 col-sm-10">
                <div class="card shadow-sm">
                    <div class="card-body">
                        <h2 class="card-title text-center mb-4">회원가입</h2>
                        <form action="/member/create2" method="post">
                            <div class="mb-3">
                                <label for="id" class="form-label">아이디</label>
                                <input type="text" id="id" name="id" class="form-control" placeholder="아이디 입력" required>
<!--                                <button type="button" class="btn btn-outline-primary" id="checkBtn" onclick="checkId()">아이디 중복 쳌</button>-->
                                <button type="button" class="btn btn-outline-primary" id="checkBtn" >아이디 중복 쳌</button>
                            </div>

                            <div class="mb-3">
                                <label for="pw" class="form-label">비밀번호</label>
                                <input type="password" id="pw" name="pw" class="form-control" placeholder="비밀번호 입력" required>
                            </div>

                            <div class="mb-3">
                                <label for="pw2" class="form-label">비밀번호 재입력</label>
                                <input type="password" id="pw2" name="pw2" class="form-control" placeholder="비밀번호 입력" required>

                            </div>

                            <div class="mb-3">
                                <label for="name" class="form-label">이름</label>
                                <input type="text" id="name" name="name" class="form-control" placeholder="이름 입력" required>
                            </div>

                            <div class="mb-3">
                                <label for="tel" class="form-label">전화번호</label>
                                <input type="tel" id="tel" name="tel" class="form-control" placeholder="전화번호 입력" required>
                            </div>

                            <div class="d-grid">
                                <button type="submit" class="btn btn-primary">가입하기</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<th:block layout:fragment="script">
<!--    자바 스크립트 추가 코드-->
    <script>
        //document.getElementById("ckeckBtn").addEventListener(이벤트명,실행함수)

        //clickBtn을 가지고 와서 click했을때 아래 함수를 실행하자
        document.getElementById("checkBtn").addEventListener("click",function(){
            alert("내가만든 함수 호출함")
            const id = document.getElementById("id").value.trim();//공백제거
            alert("id>>>" +id)
            if(!id){
                alert("아이디 입력해주세요");
                return;
            }
            //axios.get(요청주소).then(응답받고나서 처리할 내용);
            axios.get("/member/member").then(function (response){
                //axios.get(주소) : http프로토콜을 만들어서 http요청을 함
                //응답이 오면 then이 실행됨.
                //익명함수안에 변수이름하나 넣어두면 거기에 응답객체를 넣어둠
                alert(response.data);//http의 body를 꺼내줌
                alert(response.status);//http의 응답코드를 꺼내줌
            });
        });
        //id를 서버로 보내면서 중복체크 해달라고 요청하고
        //화면이 넘어가지 않고, 원할때 순서랑 상관없이 서버로 통신 기술필요
        //비동기 통신 ajax
        //xmlHttpRequest객체,fetch(),axios객체
        //브라우저에 없어서 layout.html에 cdn으로 연결
        //ajax의 결과는 일반적으로 데이터만 받아온다.(int,boolean,stirng)


        //서버로 부터 중복체크 결과를 받아서 이후에 출력(사용 가능한 아이디인지,불가능한 아이디인지)

        // function checkId(){
        //     alert("내가만든 함수 호출함")
        // }
    </script>
</th:block>

</body>
</html>


